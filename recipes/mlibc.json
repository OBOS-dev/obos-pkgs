{
    "name": "mlibc",
    "description": "Portable C standard library",
    "version": [],
    "depends": [ "bootstrap-gcc", "bootstrap-binutils", "mlibc-headers" ],
    "patches": [],
    "bootstrap-commands": [
        [ "rmdir", "${bin_package_prefix}" ],
	    [
            "meson",
            "setup",
            ".", "${repo_directory}/mlibc/",
            "--cross-file", "../mlibc-cross-file.txt",
            "--prefix", "${prefix}",
            "--buildtype", "debugoptimized",
	        "-Duse_freestnd_hdrs=enabled",
            "--wipe",
            "-Dlinux_kernel_headers=${prefix}/include",
            "-Dno_headers=true"
        ],
        [ "mkdir", "${bin_package_prefix}" ]
    ],
    "build-commands": [
        [ "meson", "compile" ]
    ],
    "install-commands": [
        [ "meson", "install", "--destdir=${destdir}" ],
        [ "meson", "install", "--destdir=${bin_package_prefix}" ],
        [ "rm", "-rf", "${destdir}/usr" ],
        [ "mkdir", "${destdir}/usr" ],
        [ "rm", "-rf", "${destdir}/usr/include" ],
        [ "rm", "-rf", "${destdir}/usr/lib" ],
        [ "ln", "-s", "${destdir}/include", "${destdir}/usr" ],
        [ "ln", "-s", "${destdir}/lib", "${destdir}/usr" ]
    ]
}
