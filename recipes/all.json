{
    "name": "all",
    "description": "All packages.",
    "comment1": "Use OBOS' first commit, as obos-strap doesn't support having sourceless packages",
    "url": "https://github.com/OBOS-dev/obos/archive/244eec76e74ea96a813cac7bb79a520048e6ebc6.tar.gz",
    "depends": [
        "cross-gcc",
        "bash",
        "coreutils",
        "diffutils",
        "grep",
        "hello",
        "oboskrnl"
    ],
    "patches": [
        {
            "patch": "patches/install-distro-files.sh.patch",
            "modifies": "install-distro-files.sh"
        }
    ],
    "bootstrap-commands": [
        [ "chmod", "+x", "${repo_directory}/install-distro-files.sh" ]
    ],
    "build-commands": [],
    "install-commands": [
         [ "rm", "-rf", "${prefix}/usr/bin" ],
         [ "rm", "-rf", "${prefix}/usr/share" ],
         [ "ln", "-s", "${prefix}/bin", "${prefix}/usr" ],
         [ "ln", "-s", "${prefix}/share", "${prefix}/usr" ],
         [ "rm", "-rf", "${bootstrap_directory}/oboskrnl/tar/usr" ],
         [ "cp", "-Lr", "${prefix}/usr/", "${bootstrap_directory}/oboskrnl/tar/" ],
         [ "mkdir", "-p", "${bootstrap_directory}/oboskrnl/tar/lib" ],
         [ "cp", "${prefix}/lib/ld64.so.1", "${bootstrap_directory}/oboskrnl/tar/lib/" ],
         [ "${repo_directory}/install-distro-files.sh", "${prefix}/..", "${bootstrap_directory}/oboskrnl/tar" ],
         [
             "cp",
             "${repo_directory}/obos/out/mem-usage",
             "${repo_directory}/obos/out/klog-level",
             "${repo_directory}/obos/out/obos-gettime",
             "${repo_directory}/obos/out/fork-test",
             "${repo_directory}/obos/out/powerctl",
             "${bootstrap_directory}/oboskrnl/tar/usr/bin/"
        ],
	[ "cp", "${repo_directory}/obos/out/init",  "${bootstrap_directory}/oboskrnl/tar/" ],
	[ "${repo_directory}/generate-initrd.sh", "${repo_directory}", "${bootstrap_directory}" ],
        [ "cmake", "--build", "${bootstrap_directory}/oboskrnl" ],
        [ "cp", "${repo_directory}/obos/out/obos.iso", "${target_prefix}/.." ]
    ]
}
