{
    "name": "bash",
    "description": "Bourne Again SHell",
    "url": "https://mirror.csclub.uwaterloo.ca/gnu/bash/bash-5.3.tar.gz",
    "depends": [ "cross-gcc" ],
    "version": [ 5,3,0 ],
    "patches": [
        {
            "patch": "patches/bash/config.sub.patch",
            "modifies": "bash-5.3/support/config.sub"
        },
        {
            "patch": "patches/bash/tparam.c.patch",
            "modifies": "bash-5.3/lib/termcap/tparam.c"
        },
        {
            "patch": "patches/bash/finfo.c.patch",
            "modifies": "bash-5.3/examples/loadables/finfo.c"
        },
        {
            "patch": "patches/bash/fltexpr.c.patch",
            "modifies": "bash-5.3/examples/loadables/fltexpr.c"
        },
        {
            "patch": "patches/bash/bashansi.h.patch",
            "modifies": "bash-5.3/bashansi.h"
        }
    ],
    "bootstrap-commands": [
        [ "${repo_directory}/bash-5.3/configure", "--prefix", "${prefix}", "--host=${target_triplet}", "--without-bash-malloc", "bash_cv_getcwd_malloc=yes" ]
    ],
    "build-commands": [
        [ "make", "all", "CFLAGS=-DNEED_EXTERN_PC=1" ]
    ],
    "install-commands": [
        [ "make", "install", "DESTDIR=${destdir}" ],
        [ "make", "DESTDIR=${bin_package_prefix}", "install" ],
        [ "ln", "-sr", "${prefix}/bin/bash", "${prefix}/${prefix}/sh" ],
        [ "ln", "-sr", "${bin_package_prefix}/${prefix}/bin/bash", "${bin_package_prefix}/${prefix}/bin/sh" ]
    ]
}
